# 微商系统の需求与设计

## Client 端

### 1. 注册与登录

- 注册账号

> 新账号注册，输入账号密码（必填）以及一些可填可不填的账户信息（如手机号，邮箱，地址等）。注册成功则自动跳转登录界面
>
> 通过 socket 通讯实现以上功能，将输入的信息传回 Server 端。Server 端在业务层确认合法注册之后，生成唯一的 uid 识别码，并存入数据库中。Server 端返回注册成功或者失败的信息。

- 登录账号

> 用户输入正确的账号与对于的密码，即可登录进入系统
>
> 同样是发出 socket 请求到 Server 端。Server 端找到数据库中的账号，以及对应的密码，进行判断，并返回登录成功或者失败的信息。

- 用户信息修改

> 登录进去之后可以修改个人信息
>
> 同样是发出 socket 请求到 Server 端。具体的合法化与处理在 Server 端进行。



### 2. 商品检索功能

#### 2.1 商品的模糊搜索

- 通过模糊搜索，及时给出搜索提示，找到想要找的商品。并可以点击进入商品页，查看详细信息，并加入购物车或者直接购买。

> 实时与 Server 端通信，并返回查询结果，查询过程在 Server 端完成。

#### 2.2 推荐商品功能

- 在首页轮转推荐商品，可以点击跳转
- 实现换一批功能，每次推荐一批商品在首页上。

> 利用 Qt 中信号与槽的功能，可能需要多线程操作。点击后跳转到对应编号的界面。主页上放置若干容器，在点击“换一批”之后，更换容器的内容。更换时，是向 Server 端发送请求，并展示 Server 端传回的商品数据。

#### 2.3 促销商品推荐

- 首页最醒目位置放置促销商品，同样支持跳转

> 最醒目位置放置几个容器，用于展示促销商品。针对不同的促销策略，再做不同展示方式。
>
> 进入首页时，向 Server 端发送请求，展示传回的促销商品数据。



### 3. 购物车功能

#### 3.1 加入购物车功能

- 在商品详情界面可以选择商品的属性，并加入购物车

> 选好商品属性后，将数据发送到 Server 端。Server 端处理数据，加入该用户的购物车中。返回加入成功。

#### 3.2 购物车多选式的结算和删除

- 可以查看自己的购物车，在购物车中也可以跳转商品详情。
- 在购物车中，可以多选并执行结算或者删除操作。

> 同样是整合数据发送往 Server 端，检查合法之后，返回购买成功或者删除成功。



### 4. 历史记录功能

#### 4.1 订单历史记录

- 可以查看历史记录，双击可以跳转商品详情
- 可以在此界面实现多选式退货
- 不可删除记录

> 记录是存在数据库中的，进入界面时需要向 Server 端请求。查看商品实现跳转指定商品编号界面。
>
> 退款：同样是整合数据发送往 Server 端，检查合法之后，返回退货成功。

#### 4.2 搜索浏览历史记录

- 搜索完成并点击进入商品之后，记录这一条记录
- 允许双击跳转，允许删除

> 同样是向 Server 端请求，得到数据。查看商品实现跳转指定商品编号界面。
>
> 删除记录时也是向 Server 端请求，得到删除成功刷新记录。



### 5 客服功能

- 实现与 Server 端的客服交流的功能
- 若有新消息会有提醒

> 通过异步 socket 进行实时通信。在 socket 通信时，实时更新聊天内容，若有更新则提醒。



### 6. UI界面

- 首页

![1730465151875](C:\Users\PC\AppData\Roaming\Typora\typora-user-images\1730465151875.png)

- 会比这个 UI 窄一点
- 其他 UI界面平铺即可

## Server 端

Server 端其实分为两个部分：业务层 + 持久层和商店端

业务层需要处理数据，而持久层则负责与数据库交互

商店端理论上也是一个 Client 端，只是需求与权限与客户端完全不同。需要独立的 UI 以及需求设计

### 1. 业务层 + 持久层

- 回应 Client，读取 Client 发送的请求，并返回数据

> 包括处理登录请求，注册请求，购买请求，退货请求，以及各类数据请求（商品查询，促销商品，聊天记录等各类记录）。
>
> 这些响应商店端无法操作处理修改，由系统自动完成并返回。

- 系统做数据处理，并与数据库交互

> 数据库结构后续详细设计

### 2. 商店端：商品操作需求

- 查询商品

> 类似 Client 端的模糊搜索，可以跳转商品详情

- 新增、修改商品

> 这两个操作的逻辑是一样的，可以设计一样的UI界面。
>
> 新增则生成唯一的 uid，并且不允许修改。修改则读取当前 uid 的商品，展示出来并允许修改。
>
> 也可以在查询之后，选择修改

- 删除商品
> 可以在查询之后，选择删除。在详情界面也可以选择删除

### 3. 客户端：客服交流需求

- 类似 Client 端的交流需求

### 4. 客户端：活动需求

- 新建促销活动，添加活动商品，添加促销策略，折扣。

> 添加商品的操作结合查询商品的操作
>
> 促销策略提供模板选择，可以自定义折扣力度，时长等等
>
> 需要额外考虑秒杀的实现（高并发多线程）

### 5. 客户端：数据统计需求

- 统计商品销售量，商品销售占比，销售变化量等等
- 查看销售历史记录，历史详情

> 可以考虑从多个视角生成图表展示数据（柱状图，折线图，饼状图等等）

